(function () {
    'use strict';

    // Criar botão
    const toggleBtn = document.createElement('div');
    toggleBtn.className = 'quest';
    toggleBtn.title = 'Abrir Script Manager';
    toggleBtn.style.backgroundImage = 'url(https://dsbr.innogamescdn.com/asset/47657033/graphic/icons/settings.png)';
    toggleBtn.style.cursor = 'pointer';

    // Painel que será controlado
    const painel = document.createElement('div');
    painel.id = 'tw_script_manager';
    painel.style = 'position:fixed;top:120px;left:20px;z-index:9999;padding:10px;background:#f4e4bc;border:2px solid #c4a300;border-radius:12px;display:none;';
    painel.innerHTML = '<b>Script Manager v4</b><br><i>Interface carregada corretamente.</i>';
    document.body.appendChild(painel);

    toggleBtn.onclick = () => {
        painel.style.display = painel.style.display === 'none' ? 'block' : 'none';
    };

    // Aguarda a interface do jogo
    window.addEventListener('load', () => {
        const questlog = document.getElementById('questlog_new');
        if (questlog) {
            questlog.appendChild(toggleBtn);
        } else {
            console.warn('Elemento #questlog_new não encontrado.');
        }
    });
})();
